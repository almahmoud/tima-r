<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="timaR">
<title>0 General comments about the infrastructure • timaR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="0 General comments about the infrastructure">
<meta property="og:description" content="timaR">
<meta property="og:image" content="https://taxonomicallyinformedannotation.github.io/tima-r/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">timaR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.211201</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/0.html">0 General comments about the infrastructure</a>
    <a class="dropdown-item" href="../articles/1.html">1 Preparing your structure-organism pairs library</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/taxonomicallyinformedannotation/tima-r/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">
<script src="0_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>0 General comments about the infrastructure</h1>
                        <h4 data-toc-skip class="author">Adriano Rutz</h4>
            
            <h4 data-toc-skip class="date">2021-12-05</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/taxonomicallyinformedannotation/tima-r/blob/HEAD/vignettes/0.Rmd" class="external-link"><code>vignettes/0.Rmd</code></a></small>
      <div class="d-none name"><code>0.Rmd</code></div>
    </div>

    
    
<p>This vignette describes the philosophy behind the infrastructure of <strong>TIMA</strong>.</p>
<p>It is currently under construction.</p>
<div class="section level2">
<h2 id="philosophy">Philosophy<a class="anchor" aria-label="anchor" href="#philosophy"></a>
</h2>
<p>Our main goals were <strong>flexibility</strong> and <strong>reproducibility</strong>.</p>
<div class="section level3">
<h3 id="flexibility">Flexibility<a class="anchor" aria-label="anchor" href="#flexibility"></a>
</h3>
<p>To ensure flexibility, we tried to split the process in as much tiny parts as needed. So you can decide whether to skip an optional part, add your own processing, etc. We tried to cover most use cases, but of course they are not exhaustive. If you feel like something useful to other users is missing, please fill an <a href="https://github.com/taxonomicallyinformedannotation/tima-r/issues" class="external-link">issue</a>.</p>
</div>
<div class="section level3">
<h3 id="reproducibility">Reproducibility<a class="anchor" aria-label="anchor" href="#reproducibility"></a>
</h3>
<p>After some time using TIMA, you will probably wonder: “<em>What was the parameters I used to generate this file?</em>” … Or a collaborator might ask you to share your data and parameters. Writing them down each time might be time consuming and not really in line with modern computational approaches. Therefore, we chose to implement all parameters of all steps (almost…) as YAML files. They are human-readable and can be used in batches. If you do not like YAML, parameters of each steps can also be given as command line arguments. They will then be saved as YAML you will be able to share.</p>
</div>
</div>
<div class="section level2">
<h2 id="use">Use<a class="anchor" aria-label="anchor" href="#use"></a>
</h2>
<p>Under construction Each step is detailed in the related <a href="https://taxonomicallyinformedannotation.github.io/tima-r/articles">vignettes</a>. Until it is finished, here are the most relevant commands</p>
<div class="section level3">
<h3 id="copy-initial-parameters">Copy initial parameters<a class="anchor" aria-label="anchor" href="#copy-initial-parameters"></a>
</h3>
<p>As mentioned previously, scripts need some parameters to be filled. Some pre-defined parameters are given in <code>config/default</code> directory. Those will help you understanding how the workflow works so you can adapt them later to your own data. So first, start by copying them into <code>config/params</code> directory. To do so:</p>
<pre class="shell"><code># copy the default params to adapat to your data later on
cp -R config/default config/params</code></pre>
<p>You now have all parameters copied in <code>config/params</code> directory, so you can start modifying them according to your own data.</p>
</div>
<div class="section level3">
<h3 id="structure-organism-pairs-library">Structure-organism pairs library<a class="anchor" aria-label="anchor" href="#structure-organism-pairs-library"></a>
</h3>
<p>The first pre-requisite to perform <em>taxonomically informed metabolite annotation</em> is to have a <em>structure-organism pairs</em> library.</p>
<div class="section level4">
<h4 id="lotus">LOTUS<a class="anchor" aria-label="anchor" href="#lotus"></a>
</h4>
<p>As starting point, we provide <strong>LOTUS</strong>. To download LOTUS pairs locally, and format them to further use, do:</p>
<pre class="shell"><code>Rscript inst/scripts/get_lotus.R
Rscript inst/scripts/prepare_lotus.R</code></pre>
<p>More details can be found … TODO</p>
</div>
<div class="section level4">
<h4 id="other-libraries">Other libraries<a class="anchor" aria-label="anchor" href="#other-libraries"></a>
</h4>
<p>As we want our tool to be flexible, you can also add your own library to LOTUS. You just need to format it in order to be compatible. As example, we prepared some ways too format closed, <em>in house</em> libraries. If you need help formatting your library or would like to share it with us for it to be implemented, feel free to contact us.</p>
<pre class="shell"><code>Rscript inst/scripts/prepare_closed.R # only if you have access to it</code></pre>
</div>
<div class="section level4">
<h4 id="merging">Merging<a class="anchor" aria-label="anchor" href="#merging"></a>
</h4>
<p>Once you have all your sub-libraries prepared, you are ready to merge them in a single file that will be used for coming steps. An adduct library will also be generated in order to perform MS1 annotation later on.</p>
<pre class="shell"><code>Rscript inst/scripts/prepare_library.R
Rscript inst/scripts/prepare_adducts.R</code></pre>
</div>
</div>
<div class="section level3">
<h3 id="annotations">Annotations<a class="anchor" aria-label="anchor" href="#annotations"></a>
</h3>
<div class="section level4">
<h4 id="get-ms2-annotations">Get MS2 annotations<a class="anchor" aria-label="anchor" href="#get-ms2-annotations"></a>
</h4>
<p>Get an example result from <a href="https://github.com/mandelbrot-project/spectral_lib_matcher" class="external-link">spectral_lib_matcher</a>, which is only in python. see related repo) For the moment, we provide an example file coming from the new ISDB. We are working on a better integration. It also supports annotations coming from GNPS (see next steps).</p>
<pre class="shell"><code>Rscript inst/scripts/get_example_isdb.R</code></pre>
</div>
<div class="section level4">
<h4 id="format-ms2-annotations">Format MS2 annotations<a class="anchor" aria-label="anchor" href="#format-ms2-annotations"></a>
</h4>
<p>depending on the annotation tool you used</p>
<pre class="shell"><code>Rscript inst/scripts/prepare_gnps.R # optional
Rscript inst/scripts/prepare_sirius.R # optional
Rscript inst/scripts/prepare_isdb.R</code></pre>
</div>
<div class="section level4">
<h4 id="complement-ms2-annotations-with-spectral-clusters-and-chemical-taxonomy-of-annotations">Complement MS2 annotations (with spectral clusters and chemical taxonomy of annotations)<a class="anchor" aria-label="anchor" href="#complement-ms2-annotations-with-spectral-clusters-and-chemical-taxonomy-of-annotations"></a>
</h4>
<pre class="shell"><code>Rscript inst/scripts/prepare_edges.R
Rscript inst/scripts/prepare_features_components.R
Rscript inst/scripts/prepare_features_classification.R</code></pre>
</div>
<div class="section level4">
<h4 id="get-biological-taxonomy-information">Get biological taxonomy information<a class="anchor" aria-label="anchor" href="#get-biological-taxonomy-information"></a>
</h4>
<pre class="shell"><code>Rscript inst/scripts/prepare_taxa.R</code></pre>
</div>
</div>
<div class="section level3">
<h3 id="and-finally-the-graal">And finally the graal!<a class="anchor" aria-label="anchor" href="#and-finally-the-graal"></a>
</h3>
<pre class="shell"><code>Rscript inst/scripts/process_annotations.R</code></pre>
<p>NOTE: you can use –help or -h argument for all .R steps to get more info</p>
<p>Rest to come …</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Adriano Rutz.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
