---
title: "0 General comments about the infrastructure"
author: "Adriano Rutz"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{0 General comments about the infrastructure}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

This vignette describes the philosophy behind the infrastructure of **TIMA**.

It is currently under construction. 
Until it is finished, here are the most relevant commands

## Use

### Copy initial parameters

```shell
# copy the default params to adapat to your data later on
cp -R config/default config/params
```

### Structure-organism pairs library

```shell
Rscript inst/scripts/get_lotus.R
Rscript inst/scripts/prepare_lotus.R
# Rscript inst/scripts/prepare_closed.R # only if you have access to it
Rscript inst/scripts/prepare_library.R
Rscript inst/scripts/prepare_adducts.R
```

### Annotations

#### Get MS2 annotations

```shell
# (spectral_lib_matcher, which is only in python. see related repo)
# instead we provide an example file coming from the new ISDB.
# It also works with annotations coming from GNPS (see next steps)
Rscript inst/scripts/get_example_isdb.R
```

#### Format MS2 annotations

```shell
# depending on the annotation tool you used
Rscript inst/scripts/prepare_gnps.R # optional
Rscript inst/scripts/prepare_sirius.R # optional
Rscript inst/scripts/prepare_isdb.R
```

#### Complement MS2 annotations (with spectral clusters and chemical taxonomy of annotations)

```shell
Rscript inst/scripts/prepare_edges.R
Rscript inst/scripts/prepare_features_components.R
Rscript inst/scripts/prepare_features_classification.R
```

#### Get biological taxonomy information

```shell
Rscript inst/scripts/prepare_taxa.R
```

### And finally the graal!

```shell
Rscript inst/scripts/process_annotations.R
```

NOTE: you can use --help or -h argument for all .R steps to get more info

Rest to come ...
